<?php include "db_connect.php"; ini_set("display_errors", 1); ini_set("display_startup_errors", 1); error_reporting(E_ALL); function getRaids($conn, $type = "faction", $sort = "DESC") { $sql = "SELECT raid_date, tier, name FROM factions ORDER BY raid_date " . $sort; $result = $conn->query($sql); return $result->fetch_all(MYSQLI_ASSOC); } $type = $_GET["type"] ?? "faction"; $sort = $_GET["sort"] ?? "DESC"; $raids = getRaids($conn, $type, $sort); $conn->close(); ?> <!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>Raids</title> <link rel="stylesheet" href="styles.css"> </head> <body> <h1>Raiding history on Torrent SkyFactions</h1> <div class="navbar"> <a href="raids.php?type=player">Player Raids</a> <a href="raids.php?type=faction">Faction Raids</a> </div> <div class="container"> <table> <thead> <tr> <th>Raid Date</th> <th>Tier</th> <th>Name</th> </tr> </thead> <tbody> <?php foreach ($raids as $raid): ?> <tr> <td><?php echo $raid["raid_date"]; ?></td> <td><?php echo $raid["tier"]; ?></td> <td><?php echo $raid["name"]; ?></td> </tr> <?php endforeach; ?> </tbody> </table> </div> </body> </html>
